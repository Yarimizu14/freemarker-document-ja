+  元文書: [http://freemarker.org/docs/dgui_quickstart_basics.html]

仮に以下のような、e-shopアプリケーションのHTMLが必要になったとします。

```
<html>
<head>
  <title>Welcome!</title>
</head>
<body>
  <h1>Welcome Big Joe!</h1>
  <p>Our latest product:
  <a href="products/greenmouse.html">green mouse</a>!
</body>
</html>  
```

ユーザー名が、WEBページを訪れた人により、また最新の商品がデーターベースより表示されるとすると、毎回それらは変わると思われます。このような場合、ユーザー名やURL、最新のプロダクトはHTMLとして入力する事は出来ず、静的なHTMLは使用できません。

FreeMarkerのこの問題に対する解決策は、静的なHTMLの代わりにテンプレートを代わりに使うということです。テンプレートは、HTMLをダイナミックに変化させるFreeMarkerの命令が入っているという事以外は、静的なHTMLと同じです。

````
<html>
<head>
  <title>Welcome!</title>
</head>
<body>
  <h1>Welcome ${user}!</h1>
  <p>Our latest product:
  <a href="${latestProduct.url}">${latestProduct.name}</a>!
</body>
</html>  
````

　テンプレートは、通常の静的なHTMLと同様にWEBサーバに保存されます。しかし、誰かがページを訪れると、実行中のテンプレート内の `${...} `を最新のコンテンツに置き換える事で、HTMLへと変換し（例えば""Big Joe"や他の訪問者の名前を`${user}`を置き換える）、ユーザーのブラウザへと送信する。そして、訪問者のWEBブラウザは最初の例のようなHTML（FreeMarkerの記号を含まない生のHTML）を受け取り、サーバでFreeMarkerが使用されていることは認識されなくなっている。
テンプレートファイル（サーバに格納されている）はこの間、変更されず、この変換は訪問者毎に何度も行われる。これにより、表示される情報は常に最新である事が保証される。

 ここで、テンプレートファイル内で、どのように現在の訪問者の名前や、最新の商品を表示するためのデータベースへの要求に関わる命令が含まれていないことに気付くかも知れません。テンプレートファイルは既にそれらの値を知っているように見えるかもしれません。そして、それはまさにそのようになっています。
 
　FreeMarkerの裏で働く重要な概念は、“プレゼンテーションロジック”と“ビジネスロジック”は分離されるべきだという事です。テンプレートでは、プレゼンテーションや、視覚的なデザイン、形式に関することのみが扱われます。表示に使用されるデータ（名前など）は、通常JAVAやその他の言語による処理によりFreeMarkerの外部で準備されます。そのため、テンプレートでは、どのように値が計算されるかを知る必要はありません。実際、テンプレートが同じでも、表示される値の算出する方法は完全に変えることができます。同様に、ページの見た目はテンプレートだけを変更する事で完全に変える事が出来ます。この分離は、テンプレートの記述者とプログラマーが別に存在するときに特に有用です。

　
FreeMarker(テンプレートの記述者）がどのようにデータが計算されているかについて興味を持つ必要がない一方で、FreeMarkerはデータの形式については知らなければなりません。テンプレートが使用可能な全てのデータは、data-modelと呼ばれるものに格納されています。`data-model`は、さきほど述べたデータを計算する処理により作られます。テンプレートが関係する範囲では、`data-model`は木構造になっており（ハードディスク上のフォルダやファイルのようなもの）、このケースでは以下のように視覚化されます。

````
(root)
  |
  +- user = "Big Joe"
  |
  +- latestProduct
      |
      +- url = "products/greenmouse.html"
      |
      +- name = "green mouse"  
````
		

（誤解を防ぐため、`data-model`はテキストファイルではありません、上図は単なる`data-model`の視覚化です。（？？））

これまで見た、`${user}`と`${latestProduct.name}`を比べてみて下さい。